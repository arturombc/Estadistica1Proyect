---
title: <center><span>Minería de Datos en la Industria de Telefonía Móvil<span>:</span> Análisis de clientes peruanos entre febrero y mayo del 2019.</span></center>
format: 
  html:
    toc: true
    toc-depth: 3
    toc-title: Contenido
    anchor_sections: TRUE # Mostrar anclaje de la sección al pasar el mouse
    code_download: TRUE # Permite a los lectores descargar el qmd
    code_folding: TRUE # Permite a los lectores cambiar a none, hide or show
    fig_caption: TRUE # Las imagenes se renderizan con caption
    theme: journal  #superhero cyborg, darkly, journal, vapor. Library "bslib"
    # runtime: shiny # sirve para que la librería shiny interactiva funcione. library("shiny")
    number-sections: true
    embed-resources: true
    author-title: Autores

author: 
  - Arturo Barrantes Chuquimia
  - Sheyla Sanchez Arauco 
  - Andrea Maricielo Pérez Castro 
  - Alejandro Rojas Alvarez
  - Luis David Acedo Lopez
editor: visual
---

```{=html}
<style>
.toggle-content {
  display: none;
}
</style>
```
# [**Introducción**]{style="color:#1FB0DB"}

## **Relevancia**

En el contexto empresarial, analizar una base de datos con información de los clientes puede llegar a ser crucial para el crecimiento de una empresa; así como del uso correcto de los recursos.\
A lo largo de este trabajo, se analizará el comportamiento de los clientes de una empresa de telefonía móvil. El objetivo será encontrar *insights* con el fin de optimizar nuestros esfuerzos hacia el crecimiento empresarial.

## **Objetivos**

### **Objetivo general**

Analizar el comportamiento de la transferencia de datos y llamadas en los clientes peruanos de una empresa de telefonía móvil entre febrero de 2019 y mayo del 2019.

### **Objetivos específicos**

1.  Analizar la relación entre el equipo y el tráfico de datos de los usuarios por periodo.
2.  Analizar la duración y la cantidad de llamadas entrantes a un usuario.
3.  Analizar la duración y la cantidad de llamadas salientes de un usuario.

## **Planificación**

Después de limpiar los datos iniciales, juntar los datos que nos son relevantes en un único csv. Podemos hacer un análisis más exhaustivo y menos complicado que si fueran en varias tablas. El trabajo se dividirá en el cumplimiento de los 3 objetivos antes presentados. Cada objetivo tendrá su respectiva sección, así como lo que motivó su búsqueda y conclusiones. Finalmente se uniran todas las conclusiones en un capítulo final.

```{mermaid}
flowchart LR
  A[Recolección de datos] --> B(Unión y limpieza de datos)
  B --> C{Objetivos}
  C --> D[Objetivo 1]
  C --> E[Objetivo 2]
  C --> F[Objetivo 3]
  D --> G(Resultado 1)
  E --> H(Resultado 2)
  F --> I(Resultado 3)
  G --> J(Conclusiones finales)
  H --> J
  I --> J
```

# **Datos**

## **Población objetivo**

Nuestra población objetivo para este estudio comprende a los clientes de una empresa de telefonía móvil en Perú durante el período de febrero a mayo de 2019. Estos clientes representan el grupo de interés principal para nuestro análisis de comportamiento y consumo de servicios de telefonía móvil.

## **Recolección**

Los datos utilizados en este análisis fueron recopilados durante el período mencionado de febrero a mayo de 2019. La información se obtuvo de los registros de la empresa de telefonía móvil, que incluye una variedad de variables relacionadas con el equipo, el tráfico de datos, las llamadas y otros aspectos del uso del servicio por parte de los clientes.

Es importante destacar que estos datos se han limpiado y preparado previamente para su análisis con el fin de garantizar la calidad y la coherencia de la información. La recolección de datos es esencial para nuestro estudio, ya que nos proporciona la base necesaria para analizar el comportamiento de los clientes y extraer conocimientos significativos que puedan beneficiar a la empresa.

## **Variables**

Las variables con las que contamos son las siguientes:

<button id="toggle-button" onclick="toggleContent()">

Mostrar/Ocultar Contenido

</button>

::: toggle-content
| VARIABLE           | CLASE y TIPO          | RESTRICCION                   | DESCRIPCCION                                                                                                                        |
|--------------|--------------|--------------|-------------------------------|
| ID1                | Categórica Nominal    | Hash de 44 letras             | Nombre encriptado de la persona                                                                                                     |
| PERIODO            | Categórica Ordinal    | Entre febrero y mayo del 2019 | Periodo de la información                                                                                                           |
| EQUIPO_TEC         | Categórica Ordinal    | 3G, 4G, 5G                    | Tecnología del chip                                                                                                                 |
| EQUIPO_MARCA       | Categórica Nominal    | LG, SAMSUNG, APPLE, etc.      | Marca del equipo                                                                                                                    |
| EQUIPO_MODELO      | Categórica Nominal    | Galaxy J2, iPhone6, etc.      | Modelo del dispositivo                                                                                                              |
| EQUIPO_OS          | Categórica Nominal    | Android, iOS, sin tac, otros. | Tipo de sistema operativo                                                                                                           |
| TRAF_DATOS_4G      | Cuantitativa Continua | Número positivo               | Tráfico de datos 4G en Mb consumidos durante el periodo                                                                             |
| TRAF_DATOS_3G      | Cuantitativa Continua | Número positivo               | Tráfico de datos 3G en Mb consumidos durante el periodo                                                                             |
| TRAF_DATOS_2G      | Cuantitativa Continua | Número positivo               | Tráfico de datos 2G en Mb consumidos durante el periodo                                                                             |
| TRAF_DATOS_TOTAL   | Cuantitativa Continua | Número positivo               | Tráfico de datos Total en Mb consumidos durante el periodo                                                                          |
| TRAF_DURACION_4G   | Cuantitativa Continua | Número positivo               | Trafico de duración 4G consumidos durante el periodo                                                                                |
| TRAF_DURACION_3G   | Cuantitativa Continua | Número positivo               | Trafico de duración 3G consumidos durante el periodo                                                                                |
| TRAF_DURACION_2G   | Cuantitativa Continua | Número positivo               | Trafico de duración 2G durante el periodo                                                                                           |
| DEPARTAMENTO_XDR   | Categória Nominal     | LIMA, HUÁNUCO, PIURA, etc.    | Departamento en el cuál se consumió mayor cantidad de Mb's                                                                          |
| DEPARTAMENTO_CDR   | Categória Nominal     | LIMA, HUÁNUCO, PIURA, etc.    | Departamento en el cuál se consumió mayor cantidad de minutos en llamadas                                                           |
| AIRTIME_IN_TOT     | Cuantitativa Continua | Número positivo               | Tiempo total llamadas recibidas durante el periodo, en minutos                                                                      |
| AIRTIME_IN_WEEK    | Cuantitativa Continua | Número Positivo               | Tiempo semanal de llamadas recibidas durante el periodo en minutos                                                                  |
| CALLS_IN_TOT       | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas recibidas durante el periodo                                                                                   |
| CALLS_IN_WEEK      | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas recibidas durante la semana                                                                                    |
| DAYS_IN_VOICE_TOT  | Cuantitativa Discreta | Número entero y positivo      | Cantidad de días que recibieron llamadas durante el periodo                                                                         |
| AIRTIME_OUT_TOT    | Cuantitativa Continua | Número positivo               | Tiempo total llamadas realizadas durante el periodo, en minutos                                                                     |
| CALLS_OUT_TOT      | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas realizadas durante el periodo                                                                                  |
| DAYS_OUT_VOICE_TOT | Cuantitativa Discreta | Número entero y positivo      | Cantidad de días que realizó llamadas durante el periodo                                                                            |
| AIRTIME_IN_WEEK    | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas recibidas de Lunes a Viernes durante el periodo, en minutos                                                |
| AIRTIME_IN_WEEKD   | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas recibidas de Sábado a Domingo durante el periodo, en minutos                                               |
| CALLS_IN_WEEK      | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas recibidas de Lunes a Viernes durante el periodo                                                                |
| CALLS_IN_WEEKD     | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas recibidas de Sábado a Domingo durante el periodo                                                               |
| ORIG_VOICE_TOT     | Cuantitativa Discreta | Número entero y positivo      | Contactos totales de los que recibió alguna llamada durante el periodo                                                              |
| DAYS_IN_VOICE_TOT  | Cuantitativa Discreta | Número entero y positivo      | Cantidad de días que recibieron llamadas durante el periodo                                                                         |
| AIRTIME_OUT_WEEK   | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas realizadas de Lunes a Viernes durante el periodo, en minutos                                               |
| AIRTIME_OUT_WEEKD  | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas realizadas de Sábado a Domingo durante el periodo, en minutos                                              |
| CALLS_OUT_WEEK     | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas realizadas de Lunes a Viernes durante el periodo                                                               |
| CALLS_OUT_WEEKD    | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas realizadas de Sábado a Domingo durante el periodo                                                              |
| DEST_VOICE         | Cuantitativa Discreta | Número entero y positivo      | Contactos totales a los que llamó durante el periodo                                                                                |
| CONT_TOT           | Cuantitativa Discreta | Número entero y positivo      | Contactos totales con los que realizó un evento (llamada entrante / saliente o mensaje de texto saliente) durante el periodo        |
| TOP_CONT_5         | Cuantitativa Discreta | Número entero y positivo      | Contactos totales con los que realizó más de 5 eventos (llamada entrante / saliente o mensaje de texto saliente) durante el periodo |
:::

# Análisis

## Librerías y setup

```{r, liberías, message=FALSE}
if (!require(readr)){install.packages(readr);library(readr)}
if (!require(dplyr)){install.packages(dplyr);library(dplyr)}
if (!require(ggplot2)){install.packages(ggplot2);library(ggplot2)}
```

```{r, setup, message=FALSE}
# Se invocan las librerías, se setean los temas, etc.
knitr::opts_chunk$set(
  comment = '', fig.width = 6, fig.height = 6 # comment = "" hace que no se vean los comentarios
)
```

## Carga y exploración de los datos

```{r}
DF <- read_csv("DataLimpia.csv")
DF
```

```{=html}
<script>
function toggleContent() {
  var content = document.querySelector(".toggle-content");
  if (content.style.display === "none" || content.style.display === "") {
    content.style.display = "block";
  } else {
    content.style.display = "none";
  }
}
</script>
```
Renombrar las variables:

```{r}

DF <- DF %>%
  rename(ID = ID1,
         CHIP = EQUIPO_TEC,
         MARCA = EQUIPO_MARCA,
         MODELO = EQUIPO_MODELO,
         OS= EQUIPO_OS,
         DATOS_4G= TRAF_DATOS_4G,
         DATOS_3G= TRAF_DATOS_3G,
         DATOS_2G= TRAF_DATOS_2G,
         DATOS_TOTAL= TRAF_DATOS_TOTAL,
         DURACION_4G=TRAF_DURACION_4G,
         DURACION_3G=TRAF_DURACION_3G,
         DURACION_2G=TRAF_DURACION_2G
         )

```

**GRAFICAS:**

**OBJETIVO 1:**

grafico 1

```{r}
ggplot(DF,aes(x=PERIODO,y=DATOS_TOTAL,fill=CHIP),xlabel=)+geom_col(position="dodge")+ggtitle("TRAFICO DE DATOS TOTAL Y TECNOLOGIA DEL CHIP") + theme(plot.title = element_text(hjust = 0.5)) +ylab("TRAFICO DE DATO(Mb)")+labs(fill="TECNOLOGIA DEL CHIP")+theme(axis.text = element_text(angle = 90))
```

Anasilis de datos:

En el presente gráfico Tráfico de datos vs periodo, podemos observar la gran variación que existe en el año 2019 en el mes de febrero teniendo como mayor preferencia a la tecnología chip del 4G de notación científica 6e + 05, frente al 3g y muy inferior al 2g con un tráfico de datos de 0e+00. Consecutivo a eso podemos observar que en el mes de marzo del mismo año se reduce lo que viene a ser la tecnología chip 4G en casi 50% frente a un aumento en la tecnología 2G y se mantiene el uso de el chip 3G, siguiendo con el análisis para el mes de abril, podemos ver que se mantiene en los estándares tanto de tecnología en el chip como el tráfico de datos frente al mes de marzo; en el mes de mayo se observa un creciente en la tecnología 4G y una caída leve en el uso de en el uso de tecnología 2G y 3G todo esto se debe y se presume a la mayor cobertura que puede existir y a las nuevas tendencias de captación de red para mejorar el servicio de los usuarios en distintas zonas del Perú o del mundo.

grafico 2:

```{r}
ggplot(DF,aes(x=PERIODO,y=DATOS_TOTAL,fill=OS),xlabel=)+geom_col(position="dodge")+ggtitle("TRAFICO DE DATOS TOTAL Y SISTEMA OPERATIVO") + theme(plot.title = element_text(hjust = 0.5)) +ylab("TRAFICO DE DATO(Mb)")+labs(fill="SISTEMA OPERATIVO")+theme(axis.text = element_text(angle = 90))
```

analisis de datos:

```{r}
boxplot(DF$DATOS_TOTAL, main="Gráfico 5: boxplot de monto semanal disponible en billeteras digitales", ylab="Monto semanal en soles")
```

```{r}
print("Descriptores numéricos y de trafico de datos 2G")
summary(DF$DATOS_2G)
print("Descriptores numéricos y de trafico de datos 3G")
summary(DF$DATOS_3G)
print("Descriptores numéricos y de trafico de datos 4G")
summary(DF$DATOS_4G)
```

**OBJETIVO 2:**

**Dispersión de Datos:**

```{r}
plot(DF$AIRTIME_IN_TOT, DF$CALLS_IN_TOT,
     xlab = "Numero de ocaciones claras",
     ylab = "Numero ocaciones claras falladas",
     main = "Rendimiento de los equipos sudamericanos")
abline()
lm(DF$AIRTIME_IN_TOT~DF$CALLS_IN_TOT,data=DF)
```

ANALISIS DEL GRAFICO:

Linealización:

```{r}
lm(DF$AIRTIME_IN_TOT~DF$AIRTIME_IN_WEEKD,data=DF)
```

```{r}
print("Descriptores numéricos y de dispersión de la cantidad de compras diarias con una billetera digital")
# Convertir la variable categórica en un factor
categorica_factor <- factor(DF$CHIP)

# Usar summary en la variable factorizada
summary(categorica_factor)




```

**Comparación del tiempo llamadas de días laborables y no laborales:**

```{r}
# Calculamos el promedio del tiempo total de llamadas en días laborables y no laborables
promedio_tiempo_week <- mean(DF$AIRTIME_OUT_WEEK)
promedio_tiempo_weekd <- mean(DF$AIRTIME_OUT_WEEKD)

# Creamos un gráfico de barras para comparar el tiempo total de llamadas en días laborables y no laborables
bar_heights <- c(promedio_tiempo_week, promedio_tiempo_weekd)
bar_names <- c("Días Laborables", "Días No Laborables")
bar_colors <- c("lightblue", "lightcoral")

barplot(bar_heights, 
        names.arg = bar_names,
        main = "Promedio del Tiempo Total de Llamadas realizadas por Tipo de Día",
        ylab = "Promedio del Tiempo Total de Llamadas realizadas",
        col = bar_colors)

# Agregamos etiquetas de porcentaje a las barras
porcentajes <- c(round((promedio_tiempo_week / sum(bar_heights)) * 100, 2),
                 round((promedio_tiempo_weekd / sum(bar_heights)) * 100, 2))


# Imprimimos el promedio del tiempo total de llamadas en días laborables y no laborables
cat("Promedio del Tiempo Total de Llamadas realizadas en Días Laborables:", promedio_tiempo_week, "\n")
cat("Promedio del Tiempo Total de Llamadas realizadas en Días No Laborables:", promedio_tiempo_weekd, "\n")

# Creamos una leyenda con porcentajes
legend(x = 1.35,  # Ajustar la posición x
       y = max(bar_heights) - 3,  # Ajustar la posición y
       legend = paste0(bar_names, "   ", porcentajes, "%"), 
       fill = bar_colors,
       cex = 1)
```
