---
title: <center><span>Análisis de usuarios de una empresa de telefonía movil.</span></center>
format: 
  html:
    toc: true
    toc-depth: 3
    toc-title: Contenido
    anchor_sections: TRUE # Mostrar anclaje de la sección al pasar el mouse
    code_download: TRUE # Permite a los lectores descargar el qmd
    code_folding: TRUE # Permite a los lectores cambiar a none, hide or show
    fig_caption: TRUE # Las imagenes se renderizan con caption
    theme: journal  #superhero cyborg, darkly, journal, vapor. Library "bslib"
    # runtime: shiny # sirve para que la librería shiny interactiva funcione. library("shiny")
    number-sections: true
    embed-resources: true
    author-title: Autores
author: 
  - Arturo Barrantes Chuquimia
  - .
  - .
  - .
  - .
editor: visual
---

# [**Introducción**]{style="color:#1FB0DB"}

## **Relevancia**

En el contexto empresarial, analizar una base de datos con información de los clientes puede llegar a ser crucial para el crecimiento de una empresa; así como del uso correcto de los recursos.\
A lo largo de este trabajo, se analizará el comportamiento de los clientes de una empresa de telefonía móvil. El objetivo será encontrar *insights* con el fin de optimizar nuestros esfuerzos hacia el crecimiento empresarial.

## **Objetivos**

1.  Encontrar una relación entre el equipo(teléfono) y el consumo de datos del usuario.
2.  Analizar las llamadas que realizan y reciben los usuarios
3.  Analizar razones por las que los usuarios no pagan las facturas.

## **Planificación**

# **Datos**

## **Población objetivo**

## **Recolección**

## **Variables**

## **Limpieza**

###### Librerías

```{r}
if (!require(readr)){install.packages(readr);library(readr)}
if (!require(dplyr)){install.packages(dplyr);library(dplyr)}
if (!require(ggplot2)){install.packages(ggplot2);library(ggplot2)}
```

```{r, setup, include=FALSE}
# Se invocan las librerías, se setean los temas, etc.
knitr::opts_chunk$set(
  comment = '', fig.width = 6, fig.height = 6 # comment = "" hace que no se vean los comentarios
)
```

Ahora leeré los txt

```{r, warning=FALSE, message=FALSE}
DF1 <- read_delim("data/EQUIPOS.txt","|")
DF2 <- read_delim("data/CONSULTAS_PORTA.txt","|")
DF3 <- read_delim("data/FACTURACION.txt","|")
DF4 <- read_delim("data/INDICADORES_RED.txt","|")
DF5 <- read_delim("data/INTENTOS_PORTA.txt","|")
DF6 <- read_delim("data/PLANTA.txt","|")
DF7 <- read_delim("data/TARGET.txt","|")
DF8 <- read_delim("data/TRAFICO_DATOS.txt","|")
DF9 <- read_delim("data/TRAFICOVOZSMS.txt","|")
```

## **Limpieza de datos**

```{r}
DF = merge(DF1,DF8, by = "ID1")
ncol(DF1)
ncol(DF8)
nrow(DF)
ncol(DF)
round(sum(is.na(DF))/(nrow(DF)*ncol(DF))*100 , digits = 2)


DF <- subset(DF, select = -TRAF_DATOS_3G_NO_COSITE)
DF <- subset(DF, select = -TRAF_DATOS_3G_COSITE)
names(DF)

colSums(is.na(DF))
DFF <- na.omit(DF)
nrow(DFF)

DFFFF <- DF6[, c("ID1", "PERIODO", "ValorRentaMensual", "DEPARTAMENTO_XDR", "DEPARTAMENTO_CDR")]
obj1 <- na.omit(merge(DFF,DFFFF, by="ID1"))
nrow(obj1)

write.table(obj1, file="obj1.csv",sep=",") 
# En esta tabla esta: EQUIPOS, TRAFICO_DATOS y PLANTA. Algunos valores de periodo se repiten, averiguar que hacer con eso
```

```{r}
DF_ = merge(DF1,DF9, by = "ID1")
names(DF_)

DFF_ <- na.omit(DF_)

round(sum(is.na(DFF_))/(nrow(DFF_)*ncol(DFF_))*100 , digits = 2)

write.table(DFF_, file="obj2.csv",sep=",")
```

```{r}

length(unique(DF3$ID2))
nrow(DF3)
D <- merge(DF3,DF7, by="ID2")
nrow(D)
D <- subset(D, select=-TARGET_PERM)
D <- subset(D, select=-NUM_BOLETA)
D <- na.omit(D)
nrow(D)
# D <- subset(D, select=-PERIODO) # Ver que hacer con el periodo
write.table(D, file="obj3.csv",sep=",")
```
