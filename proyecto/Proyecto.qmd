---
title: <center><span>Minería de Datos en la Industria de Telefonía Móvil<span>:</span> Análisis de clientes peruanos entre septiembre del 2018 y mayo del 2019.</span></center>
format: 
  html:
    toc: true
    toc-depth: 3
    toc-title: Contenido
    anchor_sections: TRUE # Mostrar anclaje de la sección al pasar el mouse
    code_download: TRUE # Permite a los lectores descargar el qmd
    code_folding: TRUE # Permite a los lectores cambiar a none, hide or show
    fig_caption: TRUE # Las imagenes se renderizan con caption
    theme: journal  #superhero cyborg, darkly, journal, vapor. Library "bslib"
    # runtime: shiny # sirve para que la librería shiny interactiva funcione. library("shiny")
    number-sections: true
    embed-resources: true
    author-title: Autores

author: 
  - Arturo Barrantes Chuquimia
  - Sheyla Sanchez Arauco 
  - Andrea Maricielo Pérez Castro 
  - Alejandro Rojas Alvarez
  - Luis David Acedo Lopez
editor: visual
---

```{=html}
<style>
.toggle-content {
  display: none;
}
#toggle-button{
  display: inline-block;
  padding: 12px 24px;
  font-size: 16px;
  font-weight: bold;
  color: #fff;
  background-color: #3498db;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background-color 0.3s ease;
}
</style>
```
# [**Introducción**]{style="color:#1FB0DB"}

## **Relevancia**

En el contexto empresarial, analizar una base de datos con información de los clientes puede llegar a ser crucial para el crecimiento de una empresa; así como del uso correcto de los recursos.\
A lo largo de este trabajo, se analizará el comportamiento de los clientes de una empresa de telefonía móvil. El objetivo será encontrar *insights* con el fin de optimizar nuestros esfuerzos hacia el crecimiento empresarial.

## **Objetivos**

### **Objetivo general**

Analizar el comportamiento de la transferencia de datos y llamadas en los clientes peruanos de una empresa de telefonía móvil entre septiembre del 2018 y mayo del 2019. Los objetivos están orientados a encontrar posibles *insights* que nos permitan mejorar el desempeño de la empresa de telefonía móvil.

Las conclusiones de estos objetivos nos permitirán tomar decisiones que puedan resultar en un mejor desempeño general.

### **Objetivos específicos**

1.  Analizar la relación entre el equipo y el tráfico de datos de los usuarios por periodo.
2.  Analizar la duración y la cantidad de llamadas entrantes y salientes a un usuario.
3.  Describir la comunicación del usuario con sus contactos durante el periodo.

## **Planificación**

Después de limpiar los datos iniciales, juntar los datos que nos son relevantes en un único csv. Podemos hacer un análisis más exhaustivo y menos complicado que si fueran en varias tablas. El trabajo se dividirá en el cumplimiento de los 3 objetivos antes presentados. Cada objetivo tendrá su respectiva sección, así como lo que motivó su búsqueda y conclusiones. Finalmente se uniran todas las conclusiones en un capítulo final.

### **Librerías y setup**

```{r, liberías, message=FALSE}
if (!require(readr)){install.packages("readr");library(readr)}
if (!require(dplyr)){install.packages("dplyr");library(dplyr)}
if (!require(ggplot2)){install.packages("ggplot2");library(ggplot2)}
if(!require(ggthemes)){install.packages("ggthemes");library(ggthemes)}
if(!require(ggrepel)){install.packages("ggrepel");library(ggrepel)}
if(!require(tidyverse)){install.packages("tidyverse");library(tidyverse)}
if(!require(forcats)){install.packages("forcats");library(forcats)}
```

```{r, setup, message=FALSE}
knitr::opts_chunk$set(
  #comment = '', fig.width = 14, fig.height = 9
)
```

### **Milestones del proyecto**

```{mermaid, flowchart}
flowchart LR
  A[Recolección de datos] --> B(Unión y limpieza de datos)
  B --> C{Objetivos}
  C --> D[Objetivo 1]
  C --> E[Objetivo 2]
  C --> F[Objetivo 3]
  D --> G(Resultado 1)
  E --> H(Resultado 2)
  F --> I(Resultado 3)
  G --> J(Conclusiones finales)
  H --> J
  I --> J
```

### **Timeline del proyecto**

```{R, Timeline, message=FALSE}
timeline <- read_csv("timeline.csv")
ggplot(timeline, aes(x = inicio, xend = fin, y = Integrantes, yend = Integrantes, color = actividad)) +
  geom_segment(linewidth = 2, lineend = "round") +
  labs(
    title = 'Timeline de proyecto',
    x = 'Fecha',
    y = 'Participantes'
  ) +
  scale_colour_brewer(palette = "Set1") +
  theme_minimal() +
  theme(
    axis.title = element_text(size = 15),
    axis.text.x = element_text(size = 10),
    legend.position = "top",
    legend.title = element_blank(),
    plot.title = element_text(size = 20, hjust = 0.5)
  )
```

# [**Datos**]{style="color:#1FB0DB"}

## **Carga de la base de datos**

```{r, carga-DF}
DF <- read_csv("DataLimpia.csv"
               , col_types = cols(.default = col_guess()
                                  , CHIP=col_factor(levels = c("2G","3G","4G"))
                                  , PERIODO=col_date(format = "%Y%m")
                                  )
               )
```

## **Recolección**

Los datos utilizados en este análisis fueron recopilados durante el período mencionado de febrero a mayo de 2019. La información se obtuvo de los registros de la empresa de telefonía móvil, que incluye una variedad de variables relacionadas con el equipo, el tráfico de datos, las llamadas y otros aspectos del uso del servicio por parte de los clientes.

## **Población, muestra y muestreo**

-   **POBLACIÓN:** Usuarios de telefonía móvil dentro de Perú.
-   **MUESTRA:** Clientes de una empresa de telefonía móvil en Perú durante el período de septiembre del 2018 a mayo de 2019.
    -   **UNIDAD MUESTRAL:** Registro de un cliente en un determinado mes.
    -   **TAMAÑO:** `r nrow(DF)` observaciones.
    -   **REPRESENTATIVIDAD:** Si.
-   **MUESTREO:** Muestreo no aleatorio por conveniencia.

## **Variables**

Las variables con las que contamos son las siguientes:

<button id="toggle-button" onclick="toggleContent()">

Mostrar/Ocultar Contenido

</button>

::: toggle-content
| VARIABLE                   | CLASE y TIPO          | RESTRICCION                   | DESCRIPCCION                                                                                                                        |
|------------|------------|------------|-------------------------------------|
| ID                         | Categórica Nominal    | Hash de 44 letras             | Nombre encriptado de la persona                                                                                                     |
| PERIODO                    | Categórica Ordinal    | Entre febrero y mayo del 2019 | Periodo de la información                                                                                                           |
| CHIP                       | Categórica Ordinal    | 2G, 3G, 4G                    | Tecnología del chip                                                                                                                 |
| MARCA                      | Categórica Nominal    | LG, SAMSUNG, APPLE, etc.      | Marca del equipo                                                                                                                    |
| MODELO                     | Categórica Nominal    | Galaxy J2, iPhone6, etc.      | Modelo del dispositivo                                                                                                              |
| OS                         | Categórica Nominal    | Android, iOS, sin tac, otros. | Tipo de sistema operativo                                                                                                           |
| DATOS_4G                   | Cuantitativa Continua | Número positivo               | MB consumidos en 4G                                                                                                                 |
| DATOS_3G                   | Cuantitativa Continua | Número positivo               | MB consumidos en 3G                                                                                                                 |
| DATOS_2G                   | Cuantitativa Continua | Número positivo               | MB consumidos en 2G                                                                                                                 |
| DATOS_TOTAL                | Cuantitativa Continua | Número positivo               | MB consumidos en total                                                                                                              |
| TIEMPO_4G                  | Cuantitativa Continua | Número positivo               | Tiempo de navegación en 4G                                                                                                          |
| TIEMPO_3G                  | Cuantitativa Continua | Número positivo               | Tiempo de navegación en 3G                                                                                                          |
| TIEMPO_2G                  | Cuantitativa Continua | Número positivo               | Tiempo de navegación en 2G                                                                                                          |
| DPTO_DATOS                 | Categória Nominal     | LIMA, HUÁNUCO, PIURA, etc.    | Departamento en el cuál se consumió mayor cantidad de Mb's                                                                          |
| DPTO_TIEMPO_LLAMADAS       | Categória Nominal     | LIMA, HUÁNUCO, PIURA, etc.    | Departamento en el cuál se realizó mayor tiempo de llamadas, en minutos                                                             |
| TIEMPO_LLAMADAS_IN_TOT     | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas recibidas durante el periodo, en minutos                                                                   |
| TIEMPO_LLAMADAS_IN_SEM     | Cuantitativa Continua | Número Positivo               | Tiempo total de llamadas recibidas de Lunes a Viernes durante el periodo, en minutos                                                |
| TIEMPO_LLAMADAS_IN_FINDE   | Cuantitativa Continua | Número Positivo               | Tiempo total de llamadas recibidas de Sábado a Domingo durante el periodo, en minutos                                               |
| LLAMADAS_IN_TOT            | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas recibidas durante el periodo                                                                                   |
| LLAMADAS_IN_SEM            | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas recibidas de Lunes a Viernes durante el periodo                                                                |
| LLAMADAS_IN_FINDE          | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas recibidas de Sábado a Domingo durante el periodo                                                               |
| TIEMPO_LLAMADAS_OUT_TOT    | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas realizadas durante el periodo                                                                              |
| TIEMPO_LLAMADAS_OUT_SEM    | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas realizadas de Lunes a Viernes durante el periodo, en minutos                                               |
| TIEMPO_LLAMADAS_OUT_FINDE  | Cuantitativa Continua | Número positivo               | Tiempo total de llamadas realizadas de Sábado a Domingo durante el periodo, en minutos                                              |
| LLAMADAS_OUT_TOT           | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas realizadas durante el periodo                                                                                  |
| LLAMADAS_OUT_SEM           | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas realizadas de Lunes a Viernes durante el periodo                                                               |
| LLAMADAS_OUT_FINDE         | Cuantitativa Discreta | Número entero y positivo      | Cantidad de llamadas realizadas de Sábado a Domingo durante el periodo                                                              |
| CONTACTOS_LLAMADAS_IN_TOT  | Cuantitativa Discreta | Número entero y positivo      | Contactos totales de los que recibió alguna llamada durante el periodo                                                              |
| CONTACTOS_LLAMADAS_OUT_TOT | Cuantitativa Discreta | Número entero y positivo      | Contactos totales a los que llamó durante el periodo                                                                                |
| DIAS_LLAMADAS_IN_TOT       | Cuantitativa Discreta | Número entero y positivo      | Cantidad de días que recibieron llamadas durante el periodo                                                                         |
| DIAS_LLAMADAS_OUT_TOT      | Cuantitativa Discreta | Número entero y positivo      | Cantidad de días que realizó llamadas durante el periodo                                                                            |
| CONTACTOS_TOT              | Cuantitativa Discreta | Número entero y positivo      | Contactos totales con los que realizó un evento (llamada entrante / saliente o mensaje de texto saliente) durante el periodo        |
| CONTACTOS_TOT_5            | Cuantitativa Discreta | Número entero y positivo      | Contactos totales con los que realizó más de 5 eventos (llamada entrante / saliente o mensaje de texto saliente) durante el periodo |
:::

## **Política de Limpieza de Datos**

En un inicio se fue proporcionada una base de datos que contenía 9 tablas. Después de medir el posible impacto, carga y trabajo se decidió usar DF1, DF6, DF8 y DF9. Asimismo, se filtraron las columnas que nos parecieron más relevantes para este trabajo.

Después se unieron las tablas mediante `left_join`, se utilizó DF1 como tabla de cruce; con esta estrategia se recuperó la mayor información posible que es relevante para nuestro estudio.

Los nombres de las variables fueron cambiadas a español con la intención de una mejor comprensión.

El porcentaje de datos nulos en la tabla es `r round(sum(is.na(DF))/(nrow(DF)*ncol(DF))*100 , digits = 2)`% y la cantidad de casos completos es `r sum(complete.cases(DF))`. La razón por la que tenemos una relativa gran cantidad de casos incompletos es porque no se registraron todos los indicadores de red para los periodos anteriores a febrero del 2019. Pero se decidió conservar esas observaciones principalmente para tener una muestra más grande sobre `EQUIPOS`.

# [**Análisis Descriptivo**]{style="color:#1FB0DB"}

## **OBJETIVO 1:** Analizar la relación entre el equipo y el tráfico de datos de los usuarios por periodo.

### **Motivación**

La justificación de este objetivo reside en que latinoamérica es actualmente el continente que en proporción consume más el internet en el [mundo](https://www.atlantico.vc "Latin America Digital Transformation Report 2023"). Además, en el año 2019, los peruanos [tenian un consumo considerable de datos](https://m.inei.gob.pe/prensa/noticias/el-668-de-la-poblacion-de-6-y-mas-anos-de-edad-accedio-a-internet-de-enero-a-marzo-del-presente-ano-12954/ "Uso de teléfonos móviles Perú").

En este aspecto, analizar patrones puede permitir un mejor dominio de mercado por cualquier empresa de telefonía móvil actual, esto hace que este análisis se vuelva indispensable para conocer mejor el mercado actual y tomar mejores decisiones basadas en los datos.

### **Desarrollo**

Existen diferentes tipos de tecnología para telecomunicaciones, durante este proyecto analizaremos las de 2G, 3G y 4G; con la intención de dar contexto a los gráficos, mostraremos las diferencias entre cada una de estas tecnologías y daremos una intuición de en que contexto se pueden usar.

![](src/chip.jpg "Tecnología de Chips")

-   2G: Permite solamente llamadas y mensajes. Generalmente se utiliza cuando no existe cobertura de otro tipo. Podría ser que se use en zonas alejadas de las grandes ciudades, generalmente en modelos antiguos. No soporta la conexión a internet.

-   3G: La velocidad de descarga se aumenta, este aumento [permite visualizar](https://kenstechtips.com/index.php/download-speeds-2g-3g-and-4g-actual-meaning "Velocidad de descarga con redes 2g, 3g y 4g") contenido de streaming como videos de youtube, aunque no a una muy buena calidad.

-   4G: Como referencia, con esta tecnología es posible ver videos a 4K de resolución, el uso de esto esta más ampliamente distribuido a lo largo de las grandes ciudades y en 2019 fué el tipo de chip más utilizado.

Podemos tener una primera suposición de que esto implica que se consuman más datos de 4G que de los demás debido a la diversidad de usos que se le puede dar a este tipo de datos; y además, a la comercialización masiva de esta tecnología.

Una primera pregunta que hacer es ver si tu dispositivo puede datos que sean diferentes a la tecnología de tu chip. Podemos averiguar eso utilizando las funciones de la librería `dplyr`.

```{r, chip-4g-datos-nrow}
DF %>% 
  filter(CHIP=="4G", DATOS_2G > 0, DATOS_3G > 0) %>%
  nrow()
```

Mediante el anterior chunk podemos ver que aunque tu chip tenga una tecnología principal de 4G, a veces puede recurrir a redes de 2G y 3G.

¿Cómo será con los otros 2 tipos de chips?

```{r, uso-datos-chip-nrow, results='hold'}
DF %>% 
  filter(CHIP=="2G") %>%
  select(DATOS_2G,DATOS_3G,DATOS_4G) %>%
  filter(DATOS_4G > 0 | DATOS_3G > 0) %>%
  nrow()
DF %>% 
  filter(CHIP=="3G") %>%
  select(DATOS_2G,DATOS_3G,DATOS_4G) %>%
  filter(DATOS_4G > 0) %>%
  nrow()
```

A pesar de no ser intuitivo, podemos decir que aunque la tecnología del chip sea inferior, aún es posible recurrir a la transferencia de datos mediante otras redes.

Ahora que sabemos qué significan los diferentes tipos de tecnología de chip, podemos ver cómo es que se comporta esta variable a lo largo de estos `r length(sort(DF$PERIODO))` meses y cuánta es la transferencia de datos para cada tipo de chip. Usaremos unidades de GB, por lo tanto dividiremos `DATOS_TOTAL`(MB) entre 1000 para apreciar una mejor escala.

```{r}
ggplot(DF, aes(x = PERIODO, y = (DATOS_TOTAL / 1000), fill = CHIP)) +
  geom_col(position = "dodge", na.rm = TRUE) +
  theme_excel_new() +
  ggtitle("TRAFICO DE DATOS TOTAL Y TECNOLOGIA DEL CHIP") +
  theme(plot.title = element_text(hjust = 0.5),
        axis.text.x = element_text(angle = -90, hjust = 0, vjust = 1)) +
  labs(fill = "TECNOLOGIA DEL CHIP", x = "PERIODO", y = "TRAFICO DE DATO(Gb)") +
  scale_y_continuous(breaks = seq(0, max(DF$DATOS_TOTAL / 1000), by = 80)) +
  scale_x_date(date_breaks = "1 month", date_labels = "%b %Y")
```

Ahora surge la pregunta: ¿Qué significan estos números? Podemos explicar esto dando un ejemplo de [cuánto](https://kenstechtips.com/index.php/data-plans/1gb-data "1GB of Data: How Much Is It & How Long Does It Last? Mobile Data Limits") puedes lograr con 1GB de transferencia de datos.

-   1GB: Descargar un video de 30 min en HD
-   10GB: 300 horas de llamada de voz por Whatsapp
-   100GB: Descargar 250 aplicaciones

Ya que tenemos estas primeras impresiones, podemos intentar entender cómo es que se comporta el consumo de datos 4G, 3G y 2G por cada tecnología de equipo (CHIP), además podemos dividir esta vista en periodos para tener una interpretación holística y así decidir que variable podemos analizar a continuación.

```{r}
nombres_personalizados <- c("2018-09-01" = "Septiembre 2018", 
                            "2018-10-01" = "Octubre 2018",
                            "2018-11-01" = "Noviembre 2018",
                            "2018-12-01" = "Diciembre 2018",
                            "2019-01-01" = "Enero 2019",
                            "2019-02-01" = "Febrero 2019",
                            "2019-03-01" = "Marzo 2019",
                            "2019-04-01" = "Abril 2019",
                            "2019-05-01" = "Mayo 2019")
labeller_personalizado <- as_labeller(nombres_personalizados)

ylim_min <- 0
ylim_max <- (1.5*quantile(DF$DATOS_TOTAL, 0.75) + IQR(DF$DATOS_TOTAL, na.rm = TRUE))/1000

media_per <- aggregate(DATOS_TOTAL ~ PERIODO, data = DF, FUN = mean)
mediana_per <- aggregate(DATOS_TOTAL ~ PERIODO, data = DF, FUN = median)

ggplot(DF, aes(CHIP, DATOS_TOTAL/1000, fill = CHIP)) + 
  geom_boxplot(na.rm = TRUE, outlier.shape = NA) +
  facet_wrap(vars(PERIODO), ncol = 3, labeller = labeller_personalizado) +
  xlim(c("2G","3G","4G")) +
  ylim(ylim_min, ylim_max) +  # Establecer los límites del eje y
  geom_hline(data = media_per
             , aes(yintercept = DATOS_TOTAL / 1000, color="Media")
             , linetype = "dashed") +
  geom_hline(data = mediana_per
             , aes(yintercept = DATOS_TOTAL / 1000, color="Mediana")
             , linetype = "dashed") +
  theme_solarized() +
  ggtitle("Uso de red de usuarios por periodo") +
  labs(x = NULL
       , y = "DATOS EN GB"
       , color = "Media y mediana")
```

En esta gráfica se utilizó el límite en el eje *y* como el tercer cuartíl más 1.5 veces la IQR de `DF$DATOS_TOTAL`, además se eliminó la visualización de datos atípicos para una visualización más limpia. Esto se realizó porque los valores atípicos son extremadamente diferentes en escala al compararlos con los datos más comunes; por ejemplo, el máximo valor en GB que se gastó en un periodo es `r round(max(DF$DATOS_TOTAL/1000), 2)`, a comparación del valor de la mediana que es `r round(median(DF$DATOS_TOTAL/1000), 2)`. Debido a este comportamiento, en algunos de los gráficos futuros se tomarán los valores dentro de un intervalo razonable (1.5 veces IQR).

Ya que en el gráfico anterior pudimos ver el comportamiento entre entre el consumo de datos por `CHIP` en cada `PERIODO` y no vimos nada inusual, podemos decidir tomar de forma razonable a la variable `DATOS_4G` y analizarla.

```{r}
Q1 <- quantile(DF$DATOS_4G, 0.25)/1000
Q3 <- quantile(DF$DATOS_4G, 0.75)/1000
IQ <- IQR(DF$DATOS_4G) / 1000
dat_4g_atipicos <- sum(DF$DATOS_4G/1000 < (Q1 - 1.5 * IQ) | DF$DATOS_4G/1000 > (Q3 + 1.5 * IQ))
```

Podemos ver de la anterior gráfica que la media y la mediana no están alineadas, podemos declarar con cierta confianza que se debe a los `r dat_4g_atipicos` datos atípicos, aunque estos representen un `r (dat_4g_atipicos/length(DF$DATOS_4G))*100`% de los datos. Podemos analizar la desviación estándar para ver cómo es que se comportan estos outliers.

```{r}
sd(DF$DATOS_4G, na.rm = TRUE) / 1000
```

Podemos ver que a pesar de nuestras sospechas, pareciera que no es muy alta la desviación estándar. Pero esto es debido a la gran cantidad de datos de la muestra, esto hace que el denominador, al momento de calcular la desviación estándar, sea muy grande y eso hace que el número en general se reduzca. Pero podemos contrarrestar en cierta medida estos cambios si utilizamos el coeficiente de variación.

Se usará el coeficiente de variación para ver que tan dispersa es la muestra, no tenemos la necesidad de transformar las unidades ya que eso no afecta al cálculo final.

```{r}
coef_var_DATOS_4G <- (sd(DF$DATOS_4G, na.rm = TRUE))/mean(DF$DATOS_4G)
coef_var_DATOS_4G
```

Tenemos un coeficiente de variación de `r round(coef_var_DATOS_4G*100,2)`%, que según las convenciones establecidas, es considerado bastante alto, además confirma nuestras sospechas de que era el número de observaciones lo que hacía que la desviación estándar parezca pequeña. El coeficiente de variación indica que la dispersión de los datos es bastante grande; también, describir la variable con la media puede no ser adecuado, la mediana es un mejor descriptor en este caso.

Podemos decir que los usuarios usan aproximadamente `r round(median(DF$DATOS_4G)/1000,2)`GB por mes (mediana). Esto equivale aproximadamente a descargar una película en HD y llamar a tus amigos durante 3 horas al día durante todo el mes usando Whatsapp.

**Analisis del gráfico:**

En el gráfico que representa el tráfico de datos en función del periodo, se evidencia una variación significativa en el año 2019 durante el mes de febrero, probablemente debido al aumento de tiempo libre durante las vacaciones. Ademas, se puede observar una gran superioridad por parte de la tecnologia 4G sobre las otras durante los 4 periodos de tiempo, probablemente debido a que la tecnologia 4G se ha vuelto muy usada debido a sus mejoras en velocidad, rendimiento y capacidad de resolver servicios exigentes, lo cual lo hace escencial para la conectividad móvil actual.

Filtrando la base de datos según la tecnología del chip de cada usuario, se pueden llegar a los siguientes descriptores:

```{r}
cuatroG<-filter(DF, CHIP=="4G")
tresG<-filter(DF, CHIP=="3G")
dosG<-filter(DF, CHIP=="2G")
summary(cuatroG$DATOS_TOTAL)
summary(tresG$DATOS_TOTAL)
summary(dosG$DATOS_TOTAL)
```

Filtrando la base de datos segun la tecnologia del chip de cada usuario, se pueden

**Gráfico 2: Trafico total de datos y tipo de sistema operativo por periodo**

```{r}
ggplot(DF,aes(x=PERIODO,y=(DATOS_TOTAL/1000),fill=OS))+
  geom_col(position="dodge")+
  ggtitle("TRAFICO DE DATOS Y SISTEMA OPERATIVO") +
  theme(plot.title = element_text(hjust = 0.5)) +
  labs(fill="SISTEMA OPERATIVO", y="Trafico de datos(Gb)", x="Periodo")+
  theme(axis.text = element_text(angle = 90))
```

**Anasilis del gráfico:**

Al analizar la relación entre el tráfico de datos y el periodo de tiempo, se evidencia una disparidad considerable en el año 2019 entre las barras de color rosa, que corresponden a dispositivos con sistema operativo Android, y las barras de Apple, que son significativamente más altas. También se observa un nivel muy bajo de tráfico asociado a otros sistemas operativos y la categoría "sin sistema operativo". En los meses de marzo, abril y mayo, se observa una marcada disminución en el tráfico de datos de dispositivos Apple. Sin embargo, se nota que los niveles de tráfico de datos de dispositivos Android se mantienen constantes en marzo y abril de 2019, experimentando un aumento significativo en mayo de ese año. Esto sugiere una tendencia a la estabilidad en la adopción de sistemas operativos "otros" y la presencia de dispositivos "sin sistema operativo".

**Descriptores númericos:**

```{r, results="hold"}
print("Descriptores numéricos del trafico de datos 2G durante los 9 meses")
summary(DF$DATOS_2G)
print("Descriptores numéricos del trafico de datos 3G durante los 9 meses")
summary(DF$DATOS_3G)
print("Descriptores numéricos del trafico de datos 4G durante los 9 meses")
summary(DF$DATOS_4G)

```

Estas estadísticas descriptivas resumen el tráfico de datos en MB para tres generaciones de tecnología móvil:

\- En 2G, la media es de aproximadamente 12.084 MB, con valores que varían desde 0.000 MB hasta un máximo de 15040.509 MB, sugiriendo una posible asimetría hacia la derecha debido a una mediana de 0.392 MB más baja que la media.

\- Para 3G, la media es de alrededor de 600.92 MB, con datos que van desde 0.00 MB hasta un máximo de 170888.51 MB, indicando una posible asimetría hacia la derecha debido a una mediana de 113.63 MB menor que la media.

\- En 4G, la media es de aproximadamente 8866 MB, con valores que oscilan entre 0 MB y 795312 MB, mostrando una distribución menos sesgada, ya que la mediana (6130 MB) está cerca de la media.

Estos datos revelan diferencias significativas entre las generaciones. En 2G, existe una variabilidad considerable, con la posibilidad de valores extremadamente altos que afectan la media. En 3G, la media es aún más alta, lo que indica un aumento en el uso promedio de datos, pero nuevamente hay indicios de valores extremos. En contraste, en 4G, la brecha entre la media y la mediana es menor, lo que sugiere una distribución más uniforme de datos. Estas estadísticas son esenciales para comprender y planificar las capacidades de la red móvil y garantizar una experiencia de usuario óptima en función de las tendencias de uso de datos en cada generación.

## **OBJETIVO 2:** Analizar la duración y la cantidad de llamadas entrantes y salientes de un usuario.

### **Motivación**

La duración y la cantidad de llamadas entrantes es una forma de conocer las necesidades, preferencias y hábitos de consumo de los usuarios. Por ejemplo, si un usuario recibe muchas llamadas cortas, puede indicar que tiene problemas de conexión, o que prefiere comunicarse por otros medios. Por el contrario, si recibe pocas llamadas largas, puede indicar que tiene una buena cobertura y un buen servicio, o que le gusta hablar mucho por teléfono.

### **Desarrollo**

En general, se puede esperar que a mayor cantidad de llamadas entrantes, mayor sea el tiempo total de llamadas entrantes por usuario. Esto se debe a que cada llamada implica un tiempo mínimo de conversación, que se suma al tiempo total. Sin embargo, hay otros factores que pueden influir en el tiempo total de llamadas entrantes por usuario, como:

-   Tipo de chip: El tipo de chip determina la velocidad y la calidad de la conexión a internet y a la red móvil.

-   Tipo de sistema operativo: El tipo de sistema operativo influye en las aplicaciones que el usuario puede usar para recibir llamadas

Anticipamos que los usuarios con chips 4G tendrán un mayor tiempo total de llamadas entrantes debido a la alta calidad de conexión, mientras que los usuarios de Android experimentarán un tiempo total de llamadas entrantes más alto debido a la mayor compatibilidad de su sistema operativo con aplicaciones de llamadas. Para verificar esta relación, utilizamos un gráfico de dispersión, pero dado que nuestros datos tenían usuarios repetidos en múltiples períodos, optamos por comparar la cantidad total de llamadas realizadas y el tiempo total de llamadas durante 9 períodos mediante la creación de una nueva base de datos donde agrupamos los datos por el mismo ID de usuario y sumamos las cantidades y tiempos de llamadas correspondientes. Esto nos permitió tener una visión más completa del comportamiento a lo largo del tiempo y considerar la acumulación total de datos en lugar de analizar cada período de forma individual.

**Gráfico 6: Cantidad total de llamadas entrantes y Tiempo total de llamadas entrantes por usuario(Durante los 9 periodos en total)**

```{r}
resultado <- DF %>%
group_by(ID) %>%
summarise(TIEMPO_LLAMADAS_IN_TOTAL_PERIODOS = sum(TIEMPO_LLAMADAS_IN_TOT,na.rm=TRUE),LLAMADAS_IN_TOTAL_PERIODOS=sum(LLAMADAS_IN_TOT,na.rm=TRUE))

modelo <- lm(TIEMPO_LLAMADAS_IN_TOTAL_PERIODOS  ~ LLAMADAS_IN_TOTAL_PERIODOS, data = resultado)

# Calcular los residuos del modelo
residuos <- residuals(modelo)

# Calcular los valores atípicos basados en residuos
valores_atipicos <- boxplot.stats(residuos)$out

# Crear un nuevo data frame sin los valores atípicos
DF_NEW <- resultado[!(residuos %in% valores_atipicos), ]

# Volver a ajustar el modelo sin valores atípicos
nuevo_modelo <- lm(TIEMPO_LLAMADAS_IN_TOTAL_PERIODOS  ~ LLAMADAS_IN_TOTAL_PERIODOS, data = DF_NEW)
print(nuevo_modelo)
ggplot(DF_NEW, aes(x = DF_NEW$LLAMADAS_IN_TOTAL_PERIODOS, y = DF_NEW$TIEMPO_LLAMADAS_IN_TOTAL_PERIODOS)) +
  geom_point(shape = 16, color = "pink") +
  geom_smooth(method = "lm", se = FALSE, color = "red") +
  labs(x = "Cantidad de llamadas registradas en total de 9 meses ", y = "tiempo de llamadas registradas en total de 9 meses",
       title = "Cantidad total de llamadas registradas vs tiempo total de llamadas registradas")
```

**Ecuación de regresión lineal:**

$$ y = 1.501x + 189.201  $$

**Gráfico 7: Cantidad total de llamadas salientes y Tiempo total de llamadas salientes por usuario(Durante los 9 periodos en total)**

```{r}
resultado11 <- DF %>%
group_by(ID) %>%
summarise(TIEMPO_LLAMADAS_OUT_TOTAL_PERIODOS = sum(TIEMPO_LLAMADAS_OUT_TOT,na.rm=TRUE),LLAMADAS_OUT_TOTAL_PERIODOS=sum(LLAMADAS_OUT_TOT,na.rm=TRUE))


modelo11 <- lm(TIEMPO_LLAMADAS_OUT_TOTAL_PERIODOS  ~ LLAMADAS_OUT_TOTAL_PERIODOS, data = resultado11)

# Calcular los residuos del modelo
residuos11 <- residuals(modelo11)

# Calcular los valores atípicos basados en residuos
valores_atipicos11 <- boxplot.stats(residuos11)$out

# Crear un nuevo data frame sin los valores atípicos
DF_NEW11 <- resultado11[!(residuos11 %in% valores_atipicos11), ]

# Volver a ajustar el modelo sin valores atípicos
nuevo_modelo11 <- lm(TIEMPO_LLAMADAS_OUT_TOTAL_PERIODOS  ~LLAMADAS_OUT_TOTAL_PERIODOS, data = DF_NEW11)
print(nuevo_modelo11)
ggplot(DF_NEW11, aes(x = DF_NEW11$LLAMADAS_OUT_TOTAL_PERIODOS, y = DF_NEW11$TIEMPO_LLAMADAS_OUT_TOTAL_PERIODOS)) +
  geom_point(shape = 16, color = "lightblue") +
  geom_smooth(method = "lm", se = FALSE, color = "blue") +
  labs(x = "Cantidad de llamadas salientes en total de 9 meses ", y = "tiempo de llamadas salientes en total de 9 meses",
       title = "Cantidad total de llamadas salientes vs tiempo total de llamadas salientes")



```

**Ecuación de regresión lineal:**

$$ y = 1.718x + 192.645 $$

**Grafico 8:Comparación del tiempo llamadas entrantes de días laborables y no laborales:**

```{r}
# Calculamos el promedio del tiempo total de llamadas en días laborables y no laborables
promedio_tiempo_week <- mean(DF$TIEMPO_LLAMADAS_IN_SEM, na.rm = TRUE)
promedio_tiempo_weekd <- mean(DF$TIEMPO_LLAMADAS_IN_FINDE, na.rm = TRUE)

# Creamos un gráfico de barras para comparar el tiempo total de llamadas en días laborables y no laborables
bar_heights <- c(promedio_tiempo_week, promedio_tiempo_weekd)
bar_names <- c("Días Laborables", "Días No Laborables")
bar_colors <- c("lightblue", "lightcoral")

barplot(bar_heights, 
        names.arg = bar_names,
        main = "Promedio del duración Total de Llamadas recibidas",
        xlab= "Tipo de día",
        ylab = "Duración",
        col = bar_colors)

# Agregamos etiquetas de porcentaje a las barras
porcentajes <- c(round((promedio_tiempo_week / sum(bar_heights)) * 100, 2),
                 round((promedio_tiempo_weekd / sum(bar_heights)) * 100, 2))


# Imprimimos el promedio del tiempo total de llamadas en días laborables y no laborables
cat("Promedio del Tiempo Total de Llamadas realizadas en Días Laborables:", promedio_tiempo_week, "\n")
cat("Promedio del Tiempo Total de Llamadas realizadas en Días No Laborables:", promedio_tiempo_weekd, "\n")

# Creamos una leyenda con porcentajes
legend(x = 1.4,  # Ajustar la posición x
       y = max(bar_heights) - 2,  # Ajustar la posición y
       legend = paste0(bar_names, "   ", porcentajes, "%"), 
       fill = bar_colors,
       cex = 1)
```

**Anasilis del gráfico:** Podemos observar que la duración promedio de las llamadas recibidas es mayor de Lunes a Viernes que de Sábado a Domingo. Esto puede deberse a que son días laborables, en los que los usuarios hacen mayor uso de sus dispositivos móviles para realizar y recibir llamadas con fines personales o de trabajo.

**Descriptores:**

```{r}
print("Descriptores numéricos de la cantidad de días en los que recibieron llamadas")
summary(DF$DIAS_LLAMADAS_IN_TOT)

```

Los valores incluyen el mínimo de 0 días, lo que indica que al menos un cliente no recibió llamadas en ningún día, un primer cuartil de 24, lo que significa que el 25% de los clientes recibieron llamadas en 24 días o menos, una mediana de 28, que representa el valor medio de los días de recepción de llamadas, una media de 25.56, que es el promedio de la cantidad de días en que los clientes recibieron llamadas, un tercer cuartil de 30, indicando que el 75% de los clientes recibieron llamadas en 30 días o menos, y un máximo de 31, lo que implica que al menos un cliente recibió llamadas durante todos los días del período considerado. En resumen, esta información proporciona una visión general de la distribución de la frecuencia de las llamadas entre los clientes, desde aquellos que no recibieron llamadas en absoluto hasta aquellos que lo hicieron durante la mayoría de los días.

```{r}
# Calculamos el promedio del tiempo total de llamadas en días laborables y no laborables
promedio_tiempo_week <- mean(DF$LLAMADAS_OUT_SEM, na.rm = TRUE)
promedio_tiempo_weekd <- mean(DF$LLAMADAS_OUT_FINDE, na.rm = TRUE)

# Creamos un gráfico de barras para comparar el tiempo total de llamadas en días laborables y no laborables
bar_heights <- c(promedio_tiempo_week, promedio_tiempo_weekd)
bar_names <- c("Días Laborables", "Días No Laborables")
bar_colors <- c("lightblue", "lightcoral")

barplot(bar_heights, 
        names.arg = bar_names,
        main = "Promedio del duración Total de Llamadas realizadas",
        xlab= "Tipo de día",
        ylab = "Duración",
        col = bar_colors)

# Agregamos etiquetas de porcentaje a las barras
porcentajes <- c(round((promedio_tiempo_week / sum(bar_heights)) * 100, 2),
                 round((promedio_tiempo_weekd / sum(bar_heights)) * 100, 2))


# Imprimimos el promedio del tiempo total de llamadas en días laborables y no laborables
cat("Promedio del Tiempo Total de Llamadas recibidas en Días Laborables:", promedio_tiempo_week, "\n")
cat("Promedio del Tiempo Total de Llamadas recibidas en Días No Laborables:", promedio_tiempo_weekd, "\n")

# Creamos una leyenda con porcentajes
legend(x = 1.18,  # Ajustar la posición x
       y = max(bar_heights) - 3,  # Ajustar la posición y
       legend = paste0(bar_names, "   ", porcentajes, "%"), 
       fill = bar_colors,
       cex = 1)
```

**Descriptores:**

```{r} print("Descriptores numéricos de los días en la que los clientes recibieron llamadas ") summary(DF$DIAS_LLAMADAS_OUT_TOT)}
```

Los valores incluyen el mínimo de 0 días, lo que indica que al menos un cliente no recibió llamadas en ningún día, un primer cuartil de 24 días, lo que significa que el 25% de los clientes recibieron llamadas en 24 días o menos, una mediana de 28 días, que es el valor central de la distribución, una media de 25.69 días, que es el promedio de días de recepción de llamadas, un tercer cuartil de 30 días, indicando que el 75% de los clientes recibieron llamadas en 30 días o menos, y un máximo de 31 días, lo que implica que al menos un cliente recibió llamadas todos los días. En resumen, esta información proporciona una visión general de la distribución de la frecuencia de las llamadas entre los clientes, desde aquellos que no recibieron llamadas en absoluto hasta aquellos que lo hicieron durante la mayoría de los días.

## **OBJETIVO 3:** Describir la comunicación del usuario con sus contactos durante el periodo.

**Motivación:**

El análisis de la duración y la cantidad de llamadas salientes de un usuario es una ventana a sus necesidades, preferencias y patrones de comunicación. Si un usuario realiza numerosas llamadas breves, esto podría indicar posibles problemas de conexión o una preferencia por otros medios de comunicación. Por otro lado, si las llamadas son menos pero más largas, podría señalar una experiencia de servicio sólida o la inclinación del usuario por conversaciones más extensas. Comprender a fondo a nuestros clientes a través de este análisis no solo nos permite ofrecer planes de telefonía móvil más personalizados, sino que también nos brinda la oportunidad de optimizar la satisfacción del cliente y garantizar que nuestros servicios se adapten a sus necesidades individuales. En última instancia, este enfoque no solo fortalece nuestra relación con los usuarios, sino que también solidifica nuestro compromiso de ofrecer un servicio excepcional en la industria de las telecomunicaciones.

**Descriptores:**

```{r}
print("Descriptores numéricos de los días en la que los clientes recibieron llamadas ")
summary(DF$DIAS_LLAMADAS_OUT_TOT)
```

Los valores incluyen el mínimo de 0 días, lo que indica que al menos un cliente no recibió llamadas en ningún día, un primer cuartil de 24 días, lo que significa que el 25% de los clientes recibieron llamadas en 24 días o menos, una mediana de 28 días, que es el valor central de la distribución, una media de 25.69 días, que es el promedio de días de recepción de llamadas, un tercer cuartil de 30 días, indicando que el 75% de los clientes recibieron llamadas en 30 días o menos, y un máximo de 31 días, lo que implica que al menos un cliente recibió llamadas todos los días. En resumen, esta información proporciona una visión general de la distribución de la frecuencia de las llamadas entre los clientes, desde aquellos que no recibieron llamadas en absoluto hasta aquellos que lo hicieron durante la mayoría de los días.

**Grafico 11:Comparación del tiempo llamadas salientes en días laborables y no laborales :**

```{r}
# Calculamos el promedio del tiempo total de llamadas en días laborables y no laborables
promedio_tiempo_week <- mean(DF$LLAMADAS_OUT_SEM, na.rm = TRUE)
promedio_tiempo_weekd <- mean(DF$LLAMADAS_OUT_FINDE, na.rm = TRUE)

# Creamos un gráfico de barras para comparar el tiempo total de llamadas en días laborables y no laborables
bar_heights <- c(promedio_tiempo_week, promedio_tiempo_weekd)
bar_names <- c("Días Laborables", "Días No Laborables")
bar_colors <- c("lightblue", "lightcoral")

barplot(bar_heights, 
        names.arg = bar_names,
        main = "Promedio del duración Total de Llamadas realizadas",
        xlab= "Tipo de día",
        ylab = "Duración",
        col = bar_colors)

# Agregamos etiquetas de porcentaje a las barras
porcentajes <- c(round((promedio_tiempo_week / sum(bar_heights)) * 100, 2),
                 round((promedio_tiempo_weekd / sum(bar_heights)) * 100, 2))


# Imprimimos el promedio del tiempo total de llamadas en días laborables y no laborables
cat("Promedio del Tiempo Total de Llamadas recibidas en Días Laborables:", promedio_tiempo_week, "\n")
cat("Promedio del Tiempo Total de Llamadas recibidas en Días No Laborables:", promedio_tiempo_weekd, "\n")

# Creamos una leyenda con porcentajes
legend(x = 1.18,  # Ajustar la posición x
       y = max(bar_heights) - 3,  # Ajustar la posición y
       legend = paste0(bar_names, "   ", porcentajes, "%"), 
       fill = bar_colors,
       cex = 1)
```

**Grafico x:**

```{r, eval=FALSE}

ylim_min1 <- 0
ylim_max1 <- (1.5*quantile(DF$CONTACTOS_LLAMADAS_OUT_TOT, 0.75,na.rm = T) + IQR(DF$CONTACTOS_LLAMADAS_OUT_TOT, na.rm =T))

media_per1 <- aggregate(CONTACTOS_LLAMADAS_OUT_TOT~ PERIODO, data = DF, FUN = mean)
mediana_per1 <- aggregate(CONTACTOS_LLAMADAS_OUT_TOT ~ PERIODO, data = DF, FUN = median)

ggplot(DF, aes(CHIP, CONTACTOS_LLAMADAS_OUT_TOT, fill = CHIP)) + 
  geom_boxplot(na.rm = TRUE, outlier.shape = NA) +
  facet_wrap(vars(PERIODO), ncol = 3) +
  xlim(c("2G","3G","4G")) +
  ylim(ylim_min1, ylim_max1) +  # Establecer los límites del eje y
  geom_hline(data = media_per1
             , aes(yintercept = CONTACTOS_LLAMADAS_OUT_TOT, color="Media")
             , linetype = "dashed") +
  geom_hline(data = mediana_per1
             , aes(yintercept = CONTACTOS_LLAMADAS_OUT_TOT, color="Mediana")
             , linetype = "dashed") +
  theme_solarized() +
  ggtitle("Contactos a los que se les realizó llamadas") +
  labs(x = NULLx
       , y = "Número de llamadas"
       , color = "Media y mediana")
```

```{=html}
<script>
function toggleContent() {
  var content = document.querySelector(".toggle-content");
  if (content.style.display === "none" || content.style.display === "") {
    content.style.display = "block";
  } else {
    content.style.display = "none";
  }
}
</script>
```
# **Bibliografía**
